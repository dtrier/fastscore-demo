"# fastscore.schema.0: close_price\n\nimport numpy as np\nimport pickle\nimport time\nfrom sklearn.linear_model import LinearRegression\n\n\ndef begin():\n    global lr\n    global window, window_size\n    window = []\n    window_size = 15\n    with open('lr_pickle1.pkl', 'rb') as f:\n        lr = pickle.load(f)\n\ndef action(x):\n    time.sleep(3)\n    global window, window_size\n    x = x['Close']\n    window = window[1-window_size:] + [x]\n    if len(window) < window_size:\n        yield {\"name\": \"price\", \"value\":x}\n    else:\n        X = np.array([window])\n        y = lr.predict(X)\n        yield {\"name\":\"price\", \"value\": y[0,0]}\n\n"